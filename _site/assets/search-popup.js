function initPopup(e){if(window.isSearchPopupInitialized)return void(e&&$("#refine-search-popup").getKendoPopup().open());window.isSearchPopupInitialized=!0;var t=$("#refine-search-popup").kendoPopup({anchor:$("#refine-search-container"),origin:"bottom right",position:"top right"}).data("kendoPopup");$("#refine-search-button").on("click",function(){t.toggle()}),kendo.bind($("#refine-search-popup"),searchViewModel),updateSearchLayout(),e&&t.open()}function search(e){searchTerms=e.val(),trackSearchQuery(searchTerms)}function trackSearchQuery(e){trackItem(getSearchCategory(),prd,e)}function getSearchCategory(){}function searchInternal(e){closePopup(),search(e)}function closePopup(){var e=$("#refine-search-popup").data("kendoPopup");e.close()}function updateSearchLayout(){$("#local-search").css("padding-right",$("#refine-search-button").outerWidth())}function getDataSource(){}!function(e,t){t("kendo.popup.min",["kendo.core.min"],e)}(function(){return function(e,t){function o(t,o){return!(!t||!o)&&(t===o||e.contains(t,o))}var n,i,s,r,a=window.kendo,l=a.ui,p=l.Widget,c=a.Class,d=a.support,f=a.getOffset,u=a._outerWidth,h=a._outerHeight,m="open",g="close",w="deactivate",v="activate",_="center",b="left",y="right",k="top",x="bottom",P="absolute",S="hidden",T="body",z="location",C="position",I="visible",E="effects",R="k-state-active",A="k-state-border",D=/k-state-border-(\w+)/,O=".k-picker-wrap, .k-dropdown-wrap, .k-link",$="down",F=e(document.documentElement),H=e.proxy,L=e(window),W="scroll",N=d.transitions.css,U=N+"transform",j=e.extend,M=".kendoPopup",K=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],Q=p.extend({init:function(t,o){var n,i=this;o=o||{},o.isRtl&&(o.origin=o.origin||x+" "+y,o.position=o.position||k+" "+y),p.fn.init.call(i,t,o),t=i.element,o=i.options,i.collisions=o.collision?o.collision.split(" "):[],i.downEvent=a.applyEventMap($,a.guid()),1===i.collisions.length&&i.collisions.push(i.collisions[0]),n=e(i.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),o.appendTo=e(e(o.appendTo)[0]||n[0]||document.body),i.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!o.isRtl).css({position:P}).appendTo(o.appendTo).attr("aria-hidden",!0).on("mouseenter"+M,function(){i._hovered=!0}).on("wheel"+M,function(t){var o=e(t.target).find(".k-list"),n=o.parent();o.length&&o.is(":visible")&&(0===n.scrollTop()&&t.originalEvent.deltaY<0||n.scrollTop()===n.prop("scrollHeight")-n.prop("offsetHeight")&&t.originalEvent.deltaY>0)&&t.preventDefault()}).on("mouseleave"+M,function(){i._hovered=!1}),i.wrapper=e(),o.animation===!1&&(o.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),j(o.animation.open,{complete:function(){i.wrapper.css({overflow:I}),i._activated=!0,i._trigger(v)}}),j(o.animation.close,{complete:function(){i._animationClose()}}),i._mousedownProxy=function(e){i._mousedown(e)},i._resizeProxy=d.mobileOS.android?function(e){setTimeout(function(){i._resize(e)},600)}:function(e){i._resize(e)},o.toggleTarget&&e(o.toggleTarget).on(o.toggleEvent+M,e.proxy(i.toggle,i))},events:[m,v,g,w],options:{name:"Popup",toggleEvent:"click",origin:x+" "+b,position:k+" "+b,anchor:T,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,adjustSize:{width:0,height:0},animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},_animationClose:function(){var e=this,t=e.wrapper.data(z);e.wrapper.hide(),t&&e.wrapper.css(t),e.options.anchor!=T&&e._hideDirClass(),e._closing=!1,e._trigger(w)},destroy:function(){var t,o=this,n=o.options,i=o.element.off(M);p.fn.destroy.call(o),n.toggleTarget&&e(n.toggleTarget).off(M),n.modal||(F.off(o.downEvent,o._mousedownProxy),o._toggleResize(!1)),a.destroy(o.element.children()),i.removeData(),n.appendTo[0]===document.body&&(t=i.parent(".k-animation-container"),t[0]?t.remove():i.remove())},open:function(o,n){var i,s,r=this,l={isFixed:!isNaN(parseInt(n,10)),x:o,y:n},p=r.element,c=r.options,f=e(c.anchor),u=p[0]&&p.hasClass("km-widget");if(!r.visible()){if(c.copyAnchorStyles&&(u&&"font-size"==K[0]&&K.shift(),p.css(a.getComputedStyles(f[0],K))),p.data("animating")||r._trigger(m))return;r._activated=!1,c.modal||(F.off(r.downEvent,r._mousedownProxy).on(r.downEvent,r._mousedownProxy),r._toggleResize(!1),r._toggleResize(!0)),r.wrapper=s=a.wrap(p,c.autosize).css({overflow:S,display:"block",position:P}).attr("aria-hidden",!1),d.mobileOS.android&&s.css(U,"translatez(0)"),s.css(C),e(c.appendTo)[0]==document.body&&s.css(k,"-10000px"),r.flipped=r._position(l),i=r._openAnimation(),c.anchor!=T&&r._showDirClass(i),p.is(":visible")||p.data("olddisplay")!==t||(p.show(),p.data("olddisplay",p.css("display")),p.hide()),p.data(E,i.effects).kendoStop(!0).kendoAnimate(i).attr("aria-hidden",!1)}},_location:function(t){var o,n,i=this,s=i.element,r=i.options,l=e(r.anchor),p=s[0]&&s.hasClass("km-widget");return r.copyAnchorStyles&&(p&&"font-size"==K[0]&&K.shift(),s.css(a.getComputedStyles(l[0],K))),i.wrapper=o=a.wrap(s,r.autosize).css({overflow:S,display:"block",position:P}),d.mobileOS.android&&o.css(U,"translatez(0)"),o.css(C),e(r.appendTo)[0]==document.body&&o.css(k,"-10000px"),i._position(t||{}),n=o.offset(),{width:a._outerWidth(o),height:a._outerHeight(o),left:n.left,top:n.top}},_openAnimation:function(){var e=j(!0,{},this.options.animation.open);return e.effects=a.parseEffects(e.effects,this.flipped),e},_hideDirClass:function(){var t=e(this.options.anchor),o=((t.attr("class")||"").match(D)||["","down"])[1],n=A+"-"+o;t.removeClass(n).children(O).removeClass(R).removeClass(n),this.element.removeClass(A+"-"+a.directions[o].reverse)},_showDirClass:function(t){var o=t.effects.slideIn?t.effects.slideIn.direction:"down",n=A+"-"+o;e(this.options.anchor).addClass(n).children(O).addClass(R).addClass(n),this.element.addClass(A+"-"+a.directions[o].reverse)},position:function(){this.visible()&&(this.flipped=this._position())},toggle:function(){var e=this;e[e.visible()?g:m]()},visible:function(){return this.element.is(":"+I)},close:function(o){var n,i,s,r,l=this,p=l.options;if(l.visible()){if(n=l.wrapper[0]?l.wrapper:a.wrap(l.element).hide(),l._toggleResize(!1),l._closing||l._trigger(g))return l._toggleResize(!0),t;l.element.find(".k-popup").each(function(){var t=e(this),n=t.data("kendoPopup");n&&n.close(o)}),F.off(l.downEvent,l._mousedownProxy),o?i={hide:!0,effects:{}}:(i=j(!0,{},p.animation.close),s=l.element.data(E),r=i.effects,!r&&!a.size(r)&&s&&a.size(s)&&(i.effects=s,i.reverse=!0),l._closing=!0),l.element.kendoStop(!0).attr("aria-hidden",!0),n.css({overflow:S}).attr("aria-hidden",!0),l.element.kendoAnimate(i),o&&l._animationClose()}},_trigger:function(e){return this.trigger(e,{type:e})},_resize:function(e){var t=this;d.resize.indexOf(e.type)!==-1?(clearTimeout(t._resizeTimeout),t._resizeTimeout=setTimeout(function(){t._position(),t._resizeTimeout=null},50)):(!t._hovered||t._activated&&t.element.hasClass("k-list-container"))&&t.close()},_toggleResize:function(e){var t=e?"on":"off",o=d.resize;d.mobileOS.ios||d.mobileOS.android||d.browser.safari||(o+=" "+W),e&&!this.scrollableParents&&(this.scrollableParents=this._scrollableParents()),this.scrollableParents&&this.scrollableParents.length&&this.scrollableParents[t](W,this._resizeProxy),L[t](o,this._resizeProxy)},_mousedown:function(t){var n=this,i=n.element[0],s=n.options,r=e(s.anchor)[0],l=s.toggleTarget,p=a.eventTarget(t),c=e(p).closest(".k-popup"),d=c.parent().parent(".km-shim").length;c=c[0],!d&&c&&c!==n.element[0]||"popover"!==e(t.target).closest("a").data("rel")&&(o(i,p)||o(r,p)||l&&o(e(l)[0],p)||n.close())},_fit:function(e,t,o){var n=0;return e+t>o&&(n=o-(e+t)),e<0&&(n=-e),n},_flip:function(e,t,o,n,i,s,r){var a=0;return r=r||t,s!==i&&s!==_&&i!==_&&(e+r>n&&(a+=-(o+t)),e+a<0&&(a+=o+t)),a},_scrollableParents:function(){return e(this.options.anchor).parentsUntil("body").filter(function(e,t){return a.isScrollable(t)})},_position:function(t){var o,n,i,s,r,l,p,c,m,g,w,v,_,b,y,k,x,S=this,T=S.element,I=S.wrapper,E=S.options,R=e(E.viewport),A=d.zoomLevel(),D=!!(R[0]==window&&window.innerWidth&&A<=1.02),O=e(E.anchor),$=E.origin.toLowerCase().split(" "),F=E.position.toLowerCase().split(" "),H=S.collisions,L=10002,W=0,N=document.documentElement;if(r=E.viewport===window?{top:window.pageYOffset||document.documentElement.scrollTop||0,left:window.pageXOffset||document.documentElement.scrollLeft||0}:R.offset(),D?(l=window.innerWidth,p=window.innerHeight):(l=R.width(),p=R.height()),D&&N.scrollHeight-N.clientHeight>0&&(c=E.isRtl?-1:1,l-=c*a.support.scrollbar()),o=O.parents().filter(I.siblings()),o[0])if(i=Math.max(+o.css("zIndex"),0))L=i+10;else for(n=O.parentsUntil(o),s=n.length;W<s;W++)i=+e(n[W]).css("zIndex"),i&&L<i&&(L=i+10);return I.css("zIndex",L),I.css(t&&t.isFixed?{left:t.x,top:t.y}:S._align($,F)),m=f(I,C,O[0]===I.offsetParent()[0]),g=f(I),w=O.offsetParent().parent(".k-animation-container,.k-popup,.k-group"),w.length&&(m=f(I,C,!0),g=f(I)),g.top-=r.top,g.left-=r.left,S.wrapper.data(z)||I.data(z,j({},m)),v=j({},g),_=j({},m),b=E.adjustSize,"fit"===H[0]&&(_.top+=S._fit(v.top,h(I)+b.height,p/A)),"fit"===H[1]&&(_.left+=S._fit(v.left,u(I)+b.width,l/A)),y=j({},_),k=h(T),x=h(I),!I.height()&&k&&(x+=k),"flip"===H[0]&&(_.top+=S._flip(v.top,k,h(O),p/A,$[0],F[0],x)),"flip"===H[1]&&(_.left+=S._flip(v.left,u(T),u(O),l/A,$[1],F[1],u(I))),T.css(C,P),I.css(_),_.left!=y.left||_.top!=y.top},_align:function(t,o){var n,i=this,s=i.wrapper,r=e(i.options.anchor),a=t[0],l=t[1],p=o[0],c=o[1],d=f(r),m=e(i.options.appendTo),g=u(s),w=h(s)||h(s.children().first()),v=u(r),b=h(r),k=d.top,P=d.left,S=Math.round;return m[0]!=document.body&&(n=f(m),k-=n.top,P-=n.left),a===x&&(k+=b),a===_&&(k+=S(b/2)),p===x&&(k-=w),p===_&&(k-=S(w/2)),l===y&&(P+=v),l===_&&(P+=S(v/2)),c===y&&(P-=g),c===_&&(P-=S(g/2)),{top:k,left:P}}});l.plugin(Q),n=a.support.stableSort,i="kendoTabKeyTrap",s="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], *[contenteditable]",r=c.extend({init:function(t){this.element=e(t),this.element.autoApplyNS(i)},trap:function(){this.element.on("keydown",H(this._keepInTrap,this))},removeTrap:function(){this.element.kendoDestroy(i)},destroy:function(){this.element.kendoDestroy(i),this.element=t},shouldTrap:function(){return!0},_keepInTrap:function(e){var t,o,n;9===e.which&&this.shouldTrap()&&!e.isDefaultPrevented()&&(t=this._focusableElements(),o=this._sortFocusableElements(t),n=this._nextFocusable(e,o),this._focus(n),e.preventDefault())},_focusableElements:function(){var t=this.element.find(s).filter(function(t,o){return o.tabIndex>=0&&e(o).is(":visible")&&!e(o).is("[disabled]")});return this.element.is("[tabindex]")&&t.push(this.element[0]),t},_sortFocusableElements:function(e){var t,o;return n?t=e.sort(function(e,t){return e.tabIndex-t.tabIndex}):(o="__k_index",e.each(function(e,t){t.setAttribute(o,e)}),t=e.sort(function(e,t){return e.tabIndex===t.tabIndex?parseInt(e.getAttribute(o),10)-parseInt(t.getAttribute(o),10):e.tabIndex-t.tabIndex}),e.removeAttr(o)),t},_nextFocusable:function(e,t){var o=t.length,n=t.index(e.target);return t.get((n+(e.shiftKey?-1:1))%o)},_focus:function(e){return"IFRAME"==e.nodeName?(e.contentWindow.document.body.focus(),t):(e.focus(),"INPUT"==e.nodeName&&e.setSelectionRange&&this._haveSelectionRange(e)&&e.setSelectionRange(0,e.value.length),t)},_haveSelectionRange:function(e){var t=e.type.toLowerCase();return"text"===t||"search"===t||"url"===t||"tel"===t||"password"===t}}),l.Popup.TabKeyTrap=r}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t,o){(o||t)()});var searchPopupScriptUrl=assetsFolderPath+"/search-popup.js";loadedScripts&&loadedScripts.indexOf(searchPopupScriptUrl)<0&&loadedScripts.push(searchPopupScriptUrl),$(function(){initPopup(window.showSearchPopup)});